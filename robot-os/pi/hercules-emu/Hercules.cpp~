/*
 * Hercules.cpp
 *
 *  Created on: Mar 5, 2015
 *      Author: danke
 */

#include <iostream>
#include <string>
#include <stdio.h>
#include <unistd.h>
#include "Hercules.h"

using namespace std;

Hercules::Hercules(const string &port)
  : mSerial(port)
{
}

Hercules::~Hercules() {
}

int Hercules::run() {
	setup();
	while (true) {
		if (!loop())
			break;
	}
	return 0;
}

void Hercules::setup() {
	mSerial.Open(SerialPort::BAUD_19200,
			SerialPort::CHAR_SIZE_8,
			SerialPort::PARITY_DEFAULT,
			SerialPort::STOP_BITS_DEFAULT,
			SerialPort::FLOW_CONTROL_DEFAULT);
}

bool Hercules::loop() {
	try {
		// Print serial port
		while (mSerial.IsDataAvailable()) {
			char newChar = mSerial.ReadByte(100);
			switch (newChar) {
				case 'D':
					
			}
		}
	} catch (exception e) {
		cout << e.what() << endl;
	}
	return true;
}

